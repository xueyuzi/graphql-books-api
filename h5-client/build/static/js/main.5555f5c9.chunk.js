(this["webpackJsonph5-client"]=this["webpackJsonph5-client"]||[]).push([[0],{111:function(e,n,t){e.exports=t(200)},116:function(e,n,t){},200:function(e,n,t){"use strict";t.r(n);var a=t(95),i=t(0),r=t.n(i),o=t(32),c=t.n(o),l=(t(116),t(117),t(46)),d=t.n(l),m=t(27),s=(t(172),t(97)),u=t.n(s),k=(t(89),t(34)),v=t.n(k),f=(t(180),t(98)),E=t.n(f),h=t(110),p=t(42),g=t(33),O=t(40),b=function(){var e=Object(g.b)(p.GET_BOOK_LIST),n=Object(h.a)(e,2),t=n[0],a=n[1],o=(a.loading,a.data),c=Object(g.c)(p.GET_QUERY).data;console.log(c);var l=c.search,d=Object(g.a)();return Object(i.useEffect)((function(){t({variables:{query:l}})}),[l]),Object(i.useEffect)((function(){console.log(o)}),[o]),r.a.createElement("div",null,r.a.createElement(E.a,{placeholder:l+" (\u53ea\u663e\u793a20\u6761\u641c\u7d22\u7ed3\u679c)",maxLength:8,onSubmit:function(e){return d.writeData({data:{search:e}})}}),o&&o.books&&o.books.map((function(e){return r.a.createElement(O.b,{to:"/home/book/".concat(e.id)},r.a.createElement(v.a,{full:!0},r.a.createElement(v.a.Header,{title:e.title,extra:e.author}),r.a.createElement(v.a.Body,null,e.tags?e.tags.map((function(e){return r.a.createElement(u.a,{small:!0},e)})):r.a.createElement(r.a.Fragment,null))))})))},y=(t(191),t(105)),N=t.n(y),S=(t(193),t(106)),T=t.n(S),_=(t(195),t(109)),B=t.n(_),w=(t(53),t(44)),F=t.n(w),D=function(){var e=Object(m.h)().params,n=Object(m.f)(),t=Object(g.c)(p.GET_BOOK,{variables:{id:e.id}}),a=(t.loading,t.data);return r.a.createElement("div",null,r.a.createElement(B.a,{mode:"light",icon:r.a.createElement(F.a,{type:"left"}),onLeftClick:function(){return n.goBack()}},"\u56fe\u4e66\u8be6\u60c5"),a&&a.book&&r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(v.a.Body,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("img",{width:"150",src:a.book.image,alt:"\u56fe\u4e66\u5c01\u9762"})))),r.a.createElement("div",{style:{margin:"20px",lineHeight:"1.5"}},r.a.createElement("h3",null,"\u56fe\u4e66\u63cf\u8ff0"),r.a.createElement("div",null,a.book.summary)),r.a.createElement(N.a,{type:"primary",onClick:function(){return T.a.info("\u5df2\u52a0\u5165\u5230\u501f\u4e66\u5355")}},"\u501f\u4e66")))},K=function(){return r.a.createElement("div",null,"CartPage")},j=function(){return r.a.createElement("div",null,"UserPage")};var G=function(){var e=Object(m.g)(),n=Object(m.f)();return r.a.createElement("div",{className:"App",style:{position:"fixed",height:"100%",width:"100%",top:0}},r.a.createElement(d.a,{unselectedTintColor:"#949494",tintColor:"#33A3F4",barTintColor:"white"},r.a.createElement(d.a.Item,{title:"\u4e66\u5e93",key:"home",icon:r.a.createElement("i",{className:"iconfont"},"\ue7c6"),selectedIcon:r.a.createElement("i",{className:"iconfont selected"},"\ue7c6"),selected:e.pathname.match("home"),onPress:function(){return n.replace("/home")}},r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(m.a,{to:"/home"})),r.a.createElement(m.b,{exact:!0,path:"/home",component:b}),r.a.createElement(m.b,{exact:!0,path:"/home/book/:id",component:D})),r.a.createElement(d.a.Item,{title:"\u501f/\u8fd8\u4e66",key:"cart",selected:e.pathname.match("cart"),icon:r.a.createElement("i",{className:"iconfont"},"\ue7b3"),selectedIcon:r.a.createElement("i",{className:"iconfont selected"},"\ue7b3"),onPress:function(){return n.replace("/cart")}},r.a.createElement(K,null)),r.a.createElement(d.a.Item,{title:"\u6211\u7684",key:"user",selected:e.pathname.match("user"),icon:r.a.createElement("i",{className:"iconfont"},"\ue7ae"),selectedIcon:r.a.createElement("i",{className:"iconfont selected"},"\ue7ae"),onPress:function(){return n.replace("/user")}},r.a.createElement(j,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=t(15),x=t(75),I=t(26),C=t(41);function L(){var e=Object(a.a)(["\n  extend type Query {\n    search: String\n  }\n"]);return L=function(){return e},e}var Q=new I.a({dataIdFromObject:function(e){switch(e.__typename){case"Book":return console.log(e),e.id;default:return Object(I.b)(e)}},cacheRedirects:{Query:{book:function(e,n,t){return(0,t.getCacheKey)({__typename:"Book",id:n.id})}}}}),V=new x.a({uri:"http://gql.xueyuzi.com:4000",link:new C.a,cache:Q,typeDefs:Object(x.b)(L()),resolvers:{}});Q.writeData({data:{search:"\u4e09\u56fd\u5fd7"}}),c.a.render(r.a.createElement(q.a,{client:V},r.a.createElement(O.a,null,r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,n){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OneBOOK"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Book"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author_intro"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tags"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pubdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GET_BOOK_LIST"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"books"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OneBOOK"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GET_BOOK"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"book"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OneBOOK"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GET_QUERY"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:296}};t.loc.source={body:"fragment OneBOOK on Book {\n  id\n  title\n  author_intro\n  author\n  summary\n  rating\n  tags\n  pubdate,\n  image\n}\n\nquery GET_BOOK_LIST($query:String!){\n  books(query: $query){\n    ...OneBOOK\n  }\n}\nquery GET_BOOK($id:String!){\n  book(id:$id){\n    ...OneBOOK\n  }\n}\n\nquery GET_QUERY{\n  search @client\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function i(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function r(e,n){var t={kind:e.kind,definitions:[i(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=a[n]||new Set,o=new Set,c=new Set;for(r.forEach((function(e){c.add(e)}));c.size>0;){var l=c;c=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(a[e]||new Set).forEach((function(e){c.add(e)})))}))}return o.forEach((function(n){var a=i(e,n);a&&t.definitions.push(a)})),t}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,t){if("FragmentSpread"===n.kind)t.add(n.name.value);else if("VariableDefinition"===n.kind){var a=n.type;"NamedType"===a.kind&&t.add(a.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,t)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,t)})),n.definitions&&n.definitions.forEach((function(n){e(n,t)}))}(e,n),a[e.name.value]=n}})),e.exports=t,e.exports.GET_BOOK_LIST=r(t,"GET_BOOK_LIST"),e.exports.GET_BOOK=r(t,"GET_BOOK"),e.exports.GET_QUERY=r(t,"GET_QUERY")}},[[111,1,2]]]);
//# sourceMappingURL=main.5555f5c9.chunk.js.map